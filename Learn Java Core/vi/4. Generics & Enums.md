### **BÃ i 1: Giá»›i thiá»‡u vá» Generics**

#### **1. Giáº£i thÃ­ch khÃ¡i niá»‡m**

##### **Äá»™ng lá»±c: Váº¥n Ä‘á» trÆ°á»›c khi cÃ³ Generics**
TrÆ°á»›c Java 5, cÃ¡c collection lÆ°u trá»¯ cÃ¡c pháº§n tá»­ cÃ³ kiá»ƒu `Object`. CÃ¡ch tiáº¿p cáº­n nÃ y cÃ³ hai nhÆ°á»£c Ä‘iá»ƒm lá»›n:
1.  **Thiáº¿u an toÃ n kiá»ƒu (Type Safety):** Báº¡n cÃ³ thá»ƒ vÃ´ tÃ¬nh thÃªm má»™t object sai kiá»ƒu vÃ o má»™t collection. Lá»—i sáº½ chá»‰ Ä‘Æ°á»£c phÃ¡t hiá»‡n táº¡i thá»i Ä‘iá»ƒm cháº¡y khi object Ä‘Æ°á»£c láº¥y ra vÃ  Ã©p kiá»ƒu.
2.  **Ã‰p kiá»ƒu thá»§ cÃ´ng táº» nháº¡t:** Báº¡n pháº£i Ã©p kiá»ƒu tÆ°á»ng minh má»i object Ä‘Æ°á»£c láº¥y ra tá»« má»™t collection vá» kiá»ƒu ban Ä‘áº§u cá»§a nÃ³. Äiá»u nÃ y lÃ m lá»™n xá»™n mÃ£ vÃ  lÃ  má»™t nguá»“n tiá»m áº©n liÃªn tá»¥c cá»§a cÃ¡c lá»—i `ClassCastException`.

**MÃ£ khÃ´ng cÃ³ Generics (CÃ¡ch "cÅ©"):**
```java
List list = new ArrayList();
list.add("hello");
list.add(123); // KhÃ´ng cÃ³ lá»—i biÃªn dá»‹ch, nhÆ°ng Ä‘Ã¢y lÃ  má»™t sai láº§m logic.

// Sau Ä‘Ã³ trong mÃ£...
for (Object obj : list) {
    // ChÃºng ta pháº£i Ã©p kiá»ƒu, nhÆ°ng náº¿u obj lÃ  Integer thÃ¬ sao?
    String str = (String) obj; // NÃ©m ra ClassCastException táº¡i thá»i Ä‘iá»ƒm cháº¡y Ä‘á»‘i vá»›i sá»‘ nguyÃªn.
}
```

##### **Giáº£i phÃ¡p Generic: An toÃ n kiá»ƒu vÃ  TÃ¡i sá»­ dá»¥ng**
Generics giáº£i quyáº¿t váº¥n Ä‘á» nÃ y báº±ng cÃ¡ch cho phÃ©p báº¡n táº¡o cÃ¡c lá»›p, interface vÃ  method hoáº¡t Ä‘á»™ng trÃªn cÃ¡c kiá»ƒu nhÆ° lÃ  cÃ¡c tham sá»‘. Má»™t kiá»ƒu generic lÃ  má»™t trÃ¬nh giá»¯ chá»— Ä‘Æ°á»£c thay tháº¿ báº±ng má»™t kiá»ƒu thá»±c táº¿ khi Ä‘Æ°á»£c sá»­ dá»¥ng.

1.  **An toÃ n kiá»ƒu táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch (Compile-Time Type Safety):** TrÃ¬nh biÃªn dá»‹ch thá»±c thi cÃ¡c rÃ ng buá»™c vá» kiá»ƒu. Náº¿u báº¡n khai bÃ¡o má»™t `List<String>`, trÃ¬nh biÃªn dá»‹ch sáº½ chá»‰ cho phÃ©p báº¡n thÃªm cÃ¡c object `String` vÃ o Ä‘Ã³, báº¯t lá»—i trong quÃ¡ trÃ¬nh biÃªn dá»‹ch, khÃ´ng pháº£i táº¡i thá»i Ä‘iá»ƒm cháº¡y.
2.  **Loáº¡i bá» Ã©p kiá»ƒu:** VÃ¬ trÃ¬nh biÃªn dá»‹ch Ä‘áº£m báº£o kiá»ƒu cá»§a cÃ¡c pháº§n tá»­ trong collection, báº¡n khÃ´ng cÃ²n cáº§n pháº£i Ã©p kiá»ƒu ná»¯a. MÃ£ trá»Ÿ nÃªn sáº¡ch hÆ¡n vÃ  an toÃ n hÆ¡n.
3.  **TÃ¡i sá»­ dá»¥ng mÃ£:** Báº¡n cÃ³ thá»ƒ viáº¿t má»™t thuáº­t toÃ¡n hoáº·c cáº¥u trÃºc dá»¯ liá»‡u generic duy nháº¥t (nhÆ° `ArrayList<T>`) vÃ  sá»­ dá»¥ng nÃ³ vá»›i nhiá»u kiá»ƒu khÃ¡c nhau (`ArrayList<String>`, `ArrayList<Integer>`, v.v.) mÃ  khÃ´ng cáº§n viáº¿t láº¡i mÃ£.

##### **CÃº phÃ¡p Generic**
*   **Lá»›p/Interface Generic:** Tham sá»‘ kiá»ƒu, Ä‘Æ°á»£c Ä‘áº·t trong dáº¥u ngoáº·c nhá»n `<>`, Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh sau tÃªn lá»›p/interface.
    ```java
    // Má»™t lá»›p generic 'Box' cÃ³ thá»ƒ chá»©a báº¥t ká»³ kiá»ƒu 'T' nÃ o
    public class Box<T> {
        private T content;
        public void set(T content) { this.content = content; }
        public T get() { return content; }
    }
    ```
*   **Method Generic:** Tham sá»‘ kiá»ƒu Ä‘Æ°á»£c khai bÃ¡o trÆ°á»›c kiá»ƒu tráº£ vá» cá»§a method. Äiá»u nÃ y há»¯u Ã­ch cho cÃ¡c method static hoáº·c khi kiá»ƒu cá»§a method Ä‘á»™c láº­p vá»›i kiá»ƒu cá»§a lá»›p.
    ```java
    public <U> void inspect(U item) {
        System.out.println("Item's class: " + item.getClass().getName());
    }
    ```

##### **Suy luáº­n kiá»ƒu vÃ  ToÃ¡n tá»­ kim cÆ°Æ¡ng (`<>`)**
Ká»ƒ tá»« Java 7, báº¡n cÃ³ thá»ƒ bá» qua kiá»ƒu generic á»Ÿ váº¿ pháº£i cá»§a má»™t phÃ©p gÃ¡n náº¿u trÃ¬nh biÃªn dá»‹ch cÃ³ thá»ƒ suy ra nÃ³ tá»« váº¿ trÃ¡i. Äiá»u nÃ y Ä‘Æ°á»£c gá»i lÃ  toÃ¡n tá»­ kim cÆ°Æ¡ng.

```java
// TrÆ°á»›c Java 7 (dÃ i dÃ²ng)
Box<Integer> integerBox = new Box<Integer>();

// Java 7+ vá»›i ToÃ¡n tá»­ kim cÆ°Æ¡ng (ngáº¯n gá»n)
Box<Integer> integerBox = new Box<>(); // TrÃ¬nh biÃªn dá»‹ch suy ra <Integer>
```

##### **Raw Types: Má»™t liÃªn káº¿t Ä‘áº¿n quÃ¡ khá»©**
Má»™t raw type lÃ  tÃªn cá»§a má»™t lá»›p hoáº·c interface generic Ä‘Æ°á»£c sá»­ dá»¥ng mÃ  khÃ´ng cÃ³ báº¥t ká»³ Ä‘á»‘i sá»‘ kiá»ƒu nÃ o.
`Box rawBox = new Box(); // 'rawBox' lÃ  má»™t raw type`

Raw types tá»“n táº¡i chá»§ yáº¿u Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c vá»›i mÃ£ trÆ°á»›c khi cÃ³ generics. **Báº¡n khÃ´ng bao giá» nÃªn sá»­ dá»¥ng chÃºng trong mÃ£ má»›i.** Sá»­ dá»¥ng má»™t raw type thá»±c cháº¥t lÃ  vÃ´ hiá»‡u hÃ³a táº¥t cáº£ cÃ¡c kiá»ƒm tra an toÃ n táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch cho instance Ä‘Ã³, quay trá»Ÿ láº¡i hÃ nh vi trÆ°á»›c generics lÃ  lÆ°u trá»¯ cÃ¡c `Object` vÃ  yÃªu cáº§u Ã©p kiá»ƒu thá»§ cÃ´ng. TrÃ¬nh biÃªn dá»‹ch sáº½ Ä‘Æ°a ra cÃ¡c cáº£nh bÃ¡o "unchecked" khi báº¡n trá»™n láº«n cÃ¡c raw type vá»›i cÃ¡c parameterized type.

---

#### **2. VÃ­ dá»¥ mÃ£ nguá»“n**

```java
// Má»™t lá»›p generic Ä‘á»ƒ chá»©a má»™t giÃ¡ trá»‹ cá»§a báº¥t ká»³ kiá»ƒu nÃ o.
class Container<T> {
    private T item;

    public void setItem(T item) {
        this.item = item;
    }

    public T getItem() {
        return item;
    }
}

public class GenericsIntroDemo {
    public static void main(String[] args) {
        // --- CÃ¡ch Generic an toÃ n kiá»ƒu ---
        System.out.println("--- Generic Container Demo ---");
        // Táº¡o má»™t Container cho Integer
        Container<Integer> intContainer = new Container<>();
        intContainer.setItem(42);
        // intContainer.setItem("hello"); // Lá»–I BIÃŠN Dá»ŠCH! An toÃ n kiá»ƒu Ä‘ang hoáº¡t Ä‘á»™ng.

        // KhÃ´ng cáº§n Ã©p kiá»ƒu, vÃ  kiá»ƒu Ä‘Æ°á»£c Ä‘áº£m báº£o.
        Integer value = intContainer.getItem();
        System.out.println("Integer value: " + value);

        // --- Sá»­ dá»¥ng Raw Type (Äá»«ng lÃ m Ä‘iá»u nÃ y trong mÃ£ má»›i!) ---
        System.out.println("\n--- Raw Type Demo ---");
        Container rawContainer = new Container(); // Cáº£nh bÃ¡o chuyá»ƒn Ä‘á»•i khÃ´ng kiá»ƒm tra
        rawContainer.setItem("Some Text"); // Äiá»u nÃ y á»•n
        rawContainer.setItem(123);         // Äiá»u nÃ y cÅ©ng á»•n, nhÆ°ng máº¥t thÃ´ng tin kiá»ƒu

        // ChÃºng ta nghÄ© nÃ³ lÃ  má»™t Integer, nhÆ°ng khÃ´ng pháº£i. Äiá»u nÃ y sáº½ biÃªn dá»‹ch...
        // ...nhÆ°ng sáº½ nÃ©m ra má»™t ClassCastException táº¡i thá»i Ä‘iá»ƒm cháº¡y.
        try {
            // ChÃºng ta Ä‘Ã£ máº¥t an toÃ n táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch vÃ  pháº£i Ã©p kiá»ƒu.
            String text = (String) rawContainer.getItem();
        } catch (ClassCastException e) {
            System.out.println("ERROR: Using a raw type led to a ClassCastException!");
        }
    }
}
```

---

#### **3. BÃ i táº­p nhá»**

1.  Táº¡o má»™t lá»›p generic cÃ³ tÃªn `Pair<K, V>`.
2.  NÃ³ nÃªn cÃ³ hai trÆ°á»ng private: `key` kiá»ƒu `K` vÃ  `value` kiá»ƒu `V`.
3.  Táº¡o má»™t constructor cháº¥p nháº­n má»™t key vÃ  má»™t value Ä‘á»ƒ khá»Ÿi táº¡o cÃ¡c trÆ°á»ng.
4.  Táº¡o cÃ¡c method getter public `getKey()` vÃ  `getValue()`.
5.  Trong má»™t method `main`, khá»Ÿi táº¡o lá»›p nÃ y Ä‘á»ƒ táº¡o má»™t cáº·p cá»§a má»™t `String` vÃ  má»™t `Integer` (vÃ­ dá»¥: `Pair<String, Integer> studentGrade = new Pair<>("Alice", 95);`).
6.  In ra key vÃ  value báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c getter.

---

#### **4. CÃ¢u há»i tráº¯c nghiá»‡m**

**CÃ¢u há»i:** Lá»£i Ã­ch chÃ­nh cá»§a viá»‡c sá»­ dá»¥ng generics trong Java lÃ  gÃ¬?

A) ChÃºng cáº£i thiá»‡n hiá»‡u suáº¥t thá»i gian cháº¡y cá»§a cÃ¡c collection báº±ng cÃ¡ch loáº¡i bá» cÃ¡c kiá»ƒm tra kiá»ƒu.
B) ChÃºng cho phÃ©p má»™t lá»›p káº¿ thá»«a nhiá»u lá»›p cha.
C) ChÃºng thá»±c thi an toÃ n kiá»ƒu táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch, ngÄƒn cháº·n `ClassCastException` táº¡i thá»i Ä‘iá»ƒm cháº¡y.
D) ChÃºng cho phÃ©p sá»­ dá»¥ng cÃ¡c kiá»ƒu nguyÃªn thá»§y nhÆ° `int` vÃ  `double` trong cÃ¡c collection.

*(Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘Ã¡p Ã¡n)*

...

**ÄÃ¡p Ã¡n:** C) ChÃºng thá»±c thi an toÃ n kiá»ƒu táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch, ngÄƒn cháº·n `ClassCastException` táº¡i thá»i Ä‘iá»ƒm cháº¡y. Má»¥c Ä‘Ã­ch cá»‘t lÃµi cá»§a generics lÃ  chuyá»ƒn cÃ¡c lá»—i kiá»ƒu tá»« thá»i gian cháº¡y sang thá»i gian biÃªn dá»‹ch, lÃ m cho mÃ£ an toÃ n vÃ  máº¡nh máº½ hÆ¡n.

### **BÃ i 2: Tham sá»‘ kiá»ƒu vÃ  Giá»›i háº¡n (Bounds)**

#### **1. Giáº£i thÃ­ch khÃ¡i niá»‡m**

Trong khi cÃ¡c generics cÆ¡ báº£n Ä‘Ã£ máº¡nh máº½, sá»± linh hoáº¡t thá»±c sá»± cá»§a chÃºng Ä‘áº¿n tá»« kháº£ nÄƒng rÃ ng buá»™c cÃ¡c kiá»ƒu cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m tham sá»‘. Äiá»u nÃ y Ä‘áº¡t Ä‘Æ°á»£c thÃ´ng qua **giá»›i háº¡n (bounds)** vÃ  **kÃ½ tá»± Ä‘áº¡i diá»‡n (wildcards)**.

##### **Quy Æ°á»›c Ä‘áº·t tÃªn tham sá»‘ kiá»ƒu**
Theo quy Æ°á»›c, tÃªn tham sá»‘ kiá»ƒu lÃ  cÃ¡c chá»¯ cÃ¡i Ä‘Æ¡n, viáº¿t hoa Ä‘á»ƒ phÃ¢n biá»‡t chÃºng vá»›i tÃªn lá»›p thÃ´ng thÆ°á»ng.
*   `T` - Type (má»™t kiá»ƒu generic)
*   `E` - Element (Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i bá»Ÿi Collections Framework)
*   `K` - Key (Ä‘Æ°á»£c sá»­ dá»¥ng trong map)
*   `V` - Value (Ä‘Æ°á»£c sá»­ dá»¥ng trong map)
*   `N` - Number
*   `S`, `U`, `V` v.v. - cÃ¡c kiá»ƒu thá»© 2, 3, 4

##### **Tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n (`<T extends Type>`)**
ÄÃ´i khi báº¡n cáº§n Ä‘áº£m báº£o ráº±ng má»™t tham sá»‘ kiá»ƒu lÃ  má»™t subtype cá»§a má»™t lá»›p cá»¥ thá»ƒ hoáº·c triá»ƒn khai má»™t interface cá»¥ thá»ƒ. Äiá»u nÃ y Ä‘Æ°á»£c gá»i lÃ  má»™t **tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n (bounded type parameter)**. NÃ³ háº¡n cháº¿ "vÅ© trá»¥" cÃ¡c kiá»ƒu cÃ³ thá»ƒ Ä‘Æ°á»£c thay tháº¿ cho tham sá»‘.

*   **CÃº phÃ¡p:** `<T extends SomeClass>`, `<T extends SomeInterface>`.
*   **Tá»« khÃ³a `extends`:** Trong ngá»¯ cáº£nh cá»§a generics, `extends` Ä‘Æ°á»£c sá»­ dá»¥ng cho cáº£ lá»›p vÃ  interface. NÃ³ cÃ³ nghÄ©a lÃ  "lÃ  má»™t subtype cá»§a".
*   **Lá»£i Ã­ch:** BÃªn trong mÃ£ generic, bÃ¢y giá» báº¡n cÃ³ thá»ƒ gá»i má»™t cÃ¡ch an toÃ n cÃ¡c method Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong kiá»ƒu giá»›i háº¡n.

**Nhiá»u giá»›i háº¡n:** Má»™t tham sá»‘ kiá»ƒu cÃ³ thá»ƒ cÃ³ nhiá»u giá»›i háº¡n, nhÆ°ng lá»›p pháº£i Ä‘á»©ng trÆ°á»›c, theo sau lÃ  cÃ¡c interface, Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng má»™t dáº¥u vÃ  (`&`).
`<T extends Number & Comparable<T> & Serializable>`

##### **KÃ½ tá»± Ä‘áº¡i diá»‡n (`?`) cho sá»± linh hoáº¡t cá»§a API**
Má»™t kÃ½ tá»± Ä‘áº¡i diá»‡n Ä‘áº¡i diá»‡n cho má»™t "kiá»ƒu khÃ´ng xÃ¡c Ä‘á»‹nh." NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÃ m cho cÃ¡c API linh hoáº¡t hÆ¡n, Ä‘áº·c biá»‡t lÃ  khi xá»­ lÃ½ cÃ¡c collection. CÃ³ ba loáº¡i kÃ½ tá»± Ä‘áº¡i diá»‡n.

1.  **KÃ½ tá»± Ä‘áº¡i diá»‡n cÃ³ giá»›i háº¡n trÃªn (`? extends Type`)**
    *   **Ã nghÄ©a:** Má»™t kiá»ƒu khÃ´ng xÃ¡c Ä‘á»‹nh lÃ  má»™t subtype cá»§a `Type` (hoáº·c chÃ­nh `Type`).
    *   **VÃ­ dá»¥:** `List<? extends Number>` cÃ³ thá»ƒ lÃ  má»™t `List<Integer>`, `List<Double>`, `List<Number>`, v.v.
    *   **Háº¡n cháº¿:** Báº¡n cÃ³ thá»ƒ **Ä‘á»c** tá»« cáº¥u trÃºc nÃ y (báº¡n Ä‘Æ°á»£c Ä‘áº£m báº£o sáº½ nháº­n Ä‘Æ°á»£c Ã­t nháº¥t lÃ  má»™t `Type`), nhÆ°ng báº¡n **khÃ´ng thá»ƒ ghi** vÃ o nÃ³ (ngoáº¡i trá»« `null`). TrÃ¬nh biÃªn dá»‹ch khÃ´ng biáº¿t subtype chÃ­nh xÃ¡c, vÃ¬ váº­y nÃ³ khÃ´ng thá»ƒ Ä‘áº£m báº£o ráº±ng viá»‡c thÃªm má»™t `Integer` sáº½ an toÃ n cho má»™t `List<Double>`. ÄÃ¢y lÃ  vai trÃ² "Producer".

2.  **KÃ½ tá»± Ä‘áº¡i diá»‡n cÃ³ giá»›i háº¡n dÆ°á»›i (`? super Type`)**
    *   **Ã nghÄ©a:** Má»™t kiá»ƒu khÃ´ng xÃ¡c Ä‘á»‹nh lÃ  má»™t supertype cá»§a `Type` (hoáº·c chÃ­nh `Type`).
    *   **VÃ­ dá»¥:** `List<? super Integer>` cÃ³ thá»ƒ lÃ  má»™t `List<Integer>`, `List<Number>`, hoáº·c `List<Object>`.
    *   **Háº¡n cháº¿:** Báº¡n cÃ³ thá»ƒ **ghi** cÃ¡c object `Type` (hoáº·c cÃ¡c subtype cá»§a nÃ³) vÃ o cáº¥u trÃºc nÃ y, nhÆ°ng báº¡n **khÃ´ng Ä‘Æ°á»£c Ä‘áº£m báº£o vá» kiá»ƒu khi báº¡n Ä‘á»c** tá»« nÃ³ (báº¡n chá»‰ biáº¿t Ä‘Ã³ lÃ  má»™t `Object`). ÄÃ¢y lÃ  vai trÃ² "Consumer".

3.  **KÃ½ tá»± Ä‘áº¡i diá»‡n khÃ´ng giá»›i háº¡n (`?`)**
    *   **Ã nghÄ©a:** Má»™t kiá»ƒu khÃ´ng xÃ¡c Ä‘á»‹nh thuá»™c báº¥t ká»³ loáº¡i nÃ o. NÃ³ lÃ  viáº¿t táº¯t cá»§a `? extends Object`.
    *   **VÃ­ dá»¥:** `List<?>`.
    *   **Háº¡n cháº¿:** Báº¡n cÃ³ thá»ƒ Ä‘á»c cÃ¡c pháº§n tá»­ vÃ  Ä‘Æ°á»£c Ä‘áº£m báº£o chÃºng lÃ  cÃ¡c `Object`. Báº¡n khÃ´ng thá»ƒ ghi báº¥t cá»© thá»© gÃ¬ vÃ o nÃ³ (ngoáº¡i trá»« `null`). NÃ³ há»¯u Ã­ch cho cÃ¡c method hoáº¡t Ä‘á»™ng trÃªn cáº¥u trÃºc cá»§a má»™t collection mÃ  khÃ´ng phá»¥ thuá»™c vÃ o kiá»ƒu pháº§n tá»­ (vÃ­ dá»¥: má»™t method `printList(List<?> list)` chá»‰ gá»i `list.size()` hoáº·c láº·p vÃ  in).

##### **NguyÃªn táº¯c PECS: Producer Extends, Consumer Super**
ÄÃ¢y lÃ  má»™t cÃ¢u ghi nhá»› quan trá»ng nháº¥t Ä‘á»ƒ hiá»ƒu khi nÃ o nÃªn sá»­ dá»¥ng `extends` vÃ  `super`.
*   "**P**roducer **E**xtends": Náº¿u má»™t cáº¥u trÃºc generic lÃ  má»™t **producer** cá»§a cÃ¡c má»¥c (báº¡n chá»‰ láº¥y cÃ¡c má»¥c *ra* khá»i nÃ³), hÃ£y sá»­ dá»¥ng `? extends T`.
*   "**C**onsumer **S**uper": Náº¿u má»™t cáº¥u trÃºc generic lÃ  má»™t **consumer** cá»§a cÃ¡c má»¥c (báº¡n chá»‰ Ä‘áº·t cÃ¡c má»¥c *vÃ o* nÃ³), hÃ£y sá»­ dá»¥ng `? super T`.

---

#### **2. VÃ­ dá»¥ mÃ£ nguá»“n**

VÃ­ dá»¥ nÃ y minh há»a cÃ¡c tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n vÃ  nguyÃªn táº¯c PECS trong má»™t method `copy`.

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class BoundsAndWildcardsDemo {

    // Tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n: Method nÃ y chá»‰ hoáº¡t Ä‘á»™ng trÃªn cÃ¡c danh sÃ¡ch cá»§a Number (hoáº·c cÃ¡c subtype cá»§a nÃ³).
    // VÃ¬ cÃ³ giá»›i háº¡n, chÃºng ta cÃ³ thá»ƒ gá»i má»™t cÃ¡ch an toÃ n method doubleValue().
    public static <T extends Number> double sumOfList(List<T> list) {
        double sum = 0.0;
        for (Number n : list) {
            sum += n.doubleValue();
        }
        return sum;
    }

    // PECS Ä‘ang hoáº¡t Ä‘á»™ng:
    // 'source' lÃ  má»™t producer, vÃ¬ váº­y chÃºng ta sá»­ dá»¥ng 'extends'. ChÃºng ta Ä‘á»c tá»« nÃ³.
    // 'dest' lÃ  má»™t consumer, vÃ¬ váº­y chÃºng ta sá»­ dá»¥ng 'super'. ChÃºng ta ghi vÃ o nÃ³.
    public static <T> void copy(List<? extends T> source, List<? super T> dest) {
        for (T item : source) {
            dest.add(item);
        }
    }

    public static void main(String[] args) {
        // --- Demo Tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n ---
        List<Integer> integers = Arrays.asList(1, 2, 3, 4, 5);
        System.out.println("Sum of integers: " + sumOfList(integers));

        List<Double> doubles = Arrays.asList(1.1, 2.2, 3.3);
        System.out.println("Sum of doubles: " + sumOfList(doubles));

        // List<String> strings = Arrays.asList("a", "b");
        // sumOfList(strings); // Lá»–I BIÃŠN Dá»ŠCH! String khÃ´ng káº¿ thá»«a Number.

        // --- Demo PECS ---
        List<Number> numbers = new ArrayList<>();
        // Báº¡n cÃ³ thá»ƒ sao chÃ©p má»™t List<Integer> (producer) vÃ o má»™t List<Number> (consumer).
        copy(integers, numbers);
        System.out.println("Copied list: " + numbers);
    }
}
```

---

#### **3. BÃ i táº­p nhá»**

1.  Táº¡o má»™t method generic `findMax` vá»›i chá»¯ kÃ½ `<T extends Comparable<T>> T findMax(List<T> list)`.
2.  Giá»›i háº¡n `extends Comparable<T>` lÃ  ráº¥t quan trá»ng vÃ¬ nÃ³ Ä‘áº£m báº£o ráº±ng báº¥t ká»³ object nÃ o thuá»™c kiá»ƒu `T` sáº½ cÃ³ má»™t method `compareTo()`, mÃ  báº¡n cáº§n Ä‘á»ƒ so sÃ¡nh.
3.  Triá»ƒn khai method. NÃ³ nÃªn láº·p qua danh sÃ¡ch vÃ  sá»­ dá»¥ng `compareTo()` Ä‘á»ƒ tÃ¬m vÃ  tráº£ vá» pháº§n tá»­ lá»›n nháº¥t.
4.  Trong `main`, kiá»ƒm tra method cá»§a báº¡n vá»›i má»™t `List<Integer>` vÃ  má»™t `List<String>`.
5.  Thá»­ gá»i nÃ³ vá»›i má»™t `List` cÃ¡c object tá»« má»™t lá»›p khÃ´ng triá»ƒn khai `Comparable` vÃ  quan sÃ¡t lá»—i táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch.

---

#### **4. CÃ¢u há»i tráº¯c nghiá»‡m**

**CÃ¢u há»i:** Báº¡n Ä‘ang viáº¿t má»™t method tiá»‡n Ã­ch nháº­n má»™t `List` vÃ  thÃªm má»™t vÃ i object `Dog` má»›i vÃ o Ä‘Ã³. Lá»›p `Dog` káº¿ thá»«a `Animal`. Chá»¯ kÃ½ method nÃ o sau Ä‘Ã¢y lÃ  linh hoáº¡t vÃ  Ä‘Ãºng nháº¥t theo nguyÃªn táº¯c PECS?

A) `void addDogs(List<Dog> list)`
B) `void addDogs(List<? extends Animal> list)`
C) `void addDogs(List<? super Dog> list)`
D) `void addDogs(List<Animal> list)`

*(Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘Ã¡p Ã¡n)*

...

**ÄÃ¡p Ã¡n:** C) `void addDogs(List<? super Dog> list)`. Danh sÃ¡ch lÃ  má»™t **consumer** cá»§a cÃ¡c object `Dog` (báº¡n Ä‘ang Ä‘áº·t chÃ³ *vÃ o* nÃ³), vÃ¬ váº­y `super` lÃ  lá»±a chá»n Ä‘Ãºng. Chá»¯ kÃ½ nÃ y cho phÃ©p method hoáº¡t Ä‘á»™ng vá»›i má»™t `List<Dog>`, má»™t `List<Animal>`, hoáº·c má»™t `List<Object>`, táº¥t cáº£ Ä‘á»u lÃ  cÃ¡c consumer há»£p lá»‡ cá»§a cÃ¡c object `Dog`. Chá»¯ kÃ½ B (`extends`) sáº½ khÃ´ng Ä‘Ãºng vÃ¬ báº¡n khÃ´ng thá»ƒ ghi vÃ o má»™t danh sÃ¡ch cÃ³ giá»›i háº¡n `extends`. CÃ¡c chá»¯ kÃ½ A vÃ  D kÃ©m linh hoáº¡t hÆ¡n C.

### **BÃ i 3: Type Erasure vÃ  HÃ nh vi Runtime**

#### **1. Giáº£i thÃ­ch khÃ¡i niá»‡m**

Má»™t sá»± hiá»ƒu biáº¿t sÃ¢u sáº¯c vá» generics Ä‘Ã²i há»i pháº£i biáº¿t "bÃ­ máº­t" lá»›n nháº¥t cá»§a chÃºng: **generics lÃ  má»™t cáº¥u trÃºc táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch**. Java Virtual Machine (JVM) gáº§n nhÆ° khÃ´ng biáº¿t gÃ¬ vá» cÃ¡c kiá»ƒu generic báº¡n sá»­ dá»¥ng trong mÃ£ cá»§a mÃ¬nh. CÆ¡ cháº¿ nÃ y Ä‘Æ°á»£c gá»i lÃ  **Type Erasure**.

##### **Type Erasure lÃ  gÃ¬?**

Äá»ƒ duy trÃ¬ kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch ngÆ°á»£c vá»›i cÃ¡c phiÃªn báº£n cÅ© hÆ¡n cá»§a Java, trÃ¬nh biÃªn dá»‹ch triá»ƒn khai generics báº±ng cÃ¡ch thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau trong quÃ¡ trÃ¬nh biÃªn dá»‹ch:

1.  **Thay tháº¿ cÃ¡c tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n:** NÃ³ thay tháº¿ táº¥t cáº£ cÃ¡c tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n báº±ng giá»›i háº¡n Ä‘áº§u tiÃªn cá»§a chÃºng. Äá»‘i vá»›i `<T extends Number>`, `T` trá»Ÿ thÃ nh `Number`. Äá»‘i vá»›i má»™t giá»›i háº¡n lá»›p vÃ  interface `<T extends Number & Runnable>`, `T` cÅ©ng trá»Ÿ thÃ nh `Number`.
2.  **Thay tháº¿ cÃ¡c tham sá»‘ kiá»ƒu khÃ´ng giá»›i háº¡n:** NÃ³ thay tháº¿ táº¥t cáº£ cÃ¡c tham sá»‘ kiá»ƒu khÃ´ng giá»›i háº¡n (nhÆ° `<T>`, `<E>`) báº±ng `Object`.
3.  **ChÃ¨n cÃ¡c Ã©p kiá»ƒu:** NÃ³ chÃ¨n cÃ¡c Ã©p kiá»ƒu cáº§n thiáº¿t á»Ÿ nhá»¯ng nÆ¡i cáº§n thiáº¿t Ä‘á»ƒ duy trÃ¬ an toÃ n kiá»ƒu. VÃ­ dá»¥, khi báº¡n `get()` má»™t pháº§n tá»­ tá»« má»™t `List<String>`, trÃ¬nh biÃªn dá»‹ch Ã¢m tháº§m chÃ¨n má»™t Ã©p kiá»ƒu `(String)` cho báº¡n.
4.  **Táº¡o cÃ¡c Bridge Method:** NÃ³ táº¡o ra cÃ¡c method "cáº§u ná»‘i" Ä‘áº·c biá»‡t Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng tÃ­nh Ä‘a hÃ¬nh hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c vá»›i cÃ¡c method generic Ä‘Æ°á»£c ghi Ä‘Ã¨ trong cÃ¡c lá»›p con.

**VÃ­ dá»¥ tÆ°Æ¡ng tá»±:** HÃ£y nghÄ© vá» type erasure nhÆ° má»™t cÃ´ng thá»©c lÃ m bÃ¡nh sá»­ dá»¥ng má»™t cÃ¡i khuÃ´n. Táº¡i thá»i Ä‘iá»ƒm thiáº¿t káº¿ (thá»i Ä‘iá»ƒm biÃªn dá»‹ch), báº¡n sá»­ dá»¥ng má»™t cÃ¡i khuÃ´n "HÃ¬nh ngÃ´i sao" (`<String>`) Ä‘á»ƒ lÃªn káº¿ hoáº¡ch cho nhá»¯ng chiáº¿c bÃ¡nh quy cá»§a mÃ¬nh. Báº¡n biáº¿t mÃ¬nh sáº½ chá»‰ lÃ m nhá»¯ng chiáº¿c bÃ¡nh quy hÃ¬nh ngÃ´i sao. NhÆ°ng khi báº¡n thá»±c sá»± nÆ°á»›ng (thá»i Ä‘iá»ƒm cháº¡y), báº¡n sá»­ dá»¥ng má»™t cÃ¡i cáº¯t bÃ¡nh quy trÃ²n, chung chung (`Object`). JVM chá»‰ tháº¥y nhá»¯ng chiáº¿c bÃ¡nh quy trÃ²n. Tuy nhiÃªn, ngÆ°á»i lÃ m bÃ¡nh (trÃ¬nh biÃªn dá»‹ch) Ä‘Ã£ Ä‘á»ƒ láº¡i má»™t ghi chÃº: "Má»—i chiáº¿c bÃ¡nh quy tá»« lÃ´ nÃ y nÃªn Ä‘Æ°á»£c coi nhÆ° má»™t ngÃ´i sao." Khi ai Ä‘Ã³ láº¥y má»™t chiáº¿c bÃ¡nh quy, ngÆ°á»i lÃ m bÃ¡nh Ä‘áº£m báº£o ráº±ng nÃ³ Ä‘Æ°á»£c trao Ä‘i *nhÆ° thá»ƒ* nÃ³ lÃ  má»™t ngÃ´i sao (Ã©p kiá»ƒu Ä‘Æ°á»£c chÃ¨n vÃ o).

##### **Háº­u quáº£ vÃ  Háº¡n cháº¿ cá»§a Generics**

Type erasure lÃ  nguyÃªn nhÃ¢n gá»‘c rá»… cá»§a háº§u háº¿t cÃ¡c háº¡n cháº¿ cá»§a generics trong Java.

1.  **KhÃ´ng thá»ƒ sá»­ dá»¥ng Primitives:** Báº¡n khÃ´ng thá»ƒ sá»­ dá»¥ng cÃ¡c kiá»ƒu nguyÃªn thá»§y lÃ m tham sá»‘ kiá»ƒu (`List<int>` lÃ  báº¥t há»£p phÃ¡p). Äiá»u nÃ y lÃ  do `int` khÃ´ng pháº£i lÃ  má»™t subtype cá»§a `Object`, lÃ  kiá»ƒu Ä‘Ã£ bá»‹ xÃ³a cho cÃ¡c generics khÃ´ng giá»›i háº¡n. Báº¡n pháº£i sá»­ dá»¥ng cÃ¡c lá»›p bao bá»c cá»§a chÃºng (`List<Integer>`).

2.  **KhÃ´ng thá»ƒ táº¡o cÃ¡c Instance cá»§a Tham sá»‘ kiá»ƒu (`new T()`):** Báº¡n khÃ´ng thá»ƒ viáº¿t `new T()` vÃ¬ táº¡i thá»i Ä‘iá»ƒm cháº¡y, `T` bá»‹ xÃ³a thÃ nh `Object`. TrÃ¬nh biÃªn dá»‹ch khÃ´ng biáº¿t constructor nÃ o Ä‘á»ƒ gá»i. `new Object()` sáº½ khÃ´ng chÃ­nh xÃ¡c vÃ  vÃ´ dá»¥ng.

3.  **KhÃ´ng thá»ƒ táº¡o cÃ¡c Máº£ng Generic (`new T[]`):** `new T[10]` lÃ  báº¥t há»£p phÃ¡p. CÃ¡c máº£ng trong Java lÆ°u trá»¯ thÃ´ng tin kiá»ƒu táº¡i thá»i Ä‘iá»ƒm cháº¡y Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c kiá»ƒm tra lÆ°u trá»¯ máº£ng. Bá»Ÿi vÃ¬ `T` bá»‹ xÃ³a, thá»i gian cháº¡y sáº½ khÃ´ng biáº¿t loáº¡i object nÃ o Ä‘Æ°á»£c phÃ©p trong máº£ng, phÃ¡ vá»¡ sá»± an toÃ n cá»§a máº£ng.

4.  **KhÃ´ng thá»ƒ sá»­ dá»¥ng `instanceof` vá»›i cÃ¡c Kiá»ƒu Generic:** Viá»‡c kiá»ƒm tra `if (myList instanceof ArrayList<String>)` lÃ  báº¥t há»£p phÃ¡p. Táº¡i thá»i Ä‘iá»ƒm cháº¡y, táº¥t cáº£ nhá»¯ng gÃ¬ JVM tháº¥y lÃ  `ArrayList`. NÃ³ khÃ´ng cÃ³ thÃ´ng tin vá» pháº§n `<String>` Ä‘á»ƒ thá»±c hiá»‡n viá»‡c kiá»ƒm tra. Báº¡n chá»‰ cÃ³ thá»ƒ kiá»ƒm tra vá»›i raw type: `if (myList instanceof ArrayList)`.

##### **Bridge Methods**

ÄÃ¢y lÃ  má»™t thá»§ thuáº­t thÃ´ng minh mÃ  trÃ¬nh biÃªn dá»‹ch sá»­ dá»¥ng Ä‘á»ƒ báº£o toÃ n tÃ­nh Ä‘a hÃ¬nh. HÃ£y xem xÃ©t ká»‹ch báº£n nÃ y:

```java
class Node<T> {
    public void setData(T data) { /* ... */ }
}

class MyNode extends Node<Integer> {
    @Override
    public void setData(Integer data) { /* ... */ }
}
```
Sau khi type erasure, lá»›p `Node` trÃ´ng nhÆ° tháº¿ nÃ y: `class Node { public void setData(Object data) { ... } }`.
Lá»›p `MyNode` trÃ´ng nhÆ° tháº¿ nÃ y: `class MyNode extends Node { public void setData(Integer data) { ... } }`.

Khoan Ä‘Ã£! Chá»¯ kÃ½ cá»§a method `setData(Object)` vÃ  `setData(Integer)` lÃ  khÃ¡c nhau. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  phiÃªn báº£n `MyNode` lÃ  má»™t **náº¡p chá»“ng (overload)**, khÃ´ng pháº£i lÃ  má»™t **ghi Ä‘Ã¨ (override)**. TÃ­nh Ä‘a hÃ¬nh sáº½ bá»‹ phÃ¡ vá»¡.

Äá»ƒ kháº¯c phá»¥c Ä‘iá»u nÃ y, trÃ¬nh biÃªn dá»‹ch táº¡o ra má»™t **bridge method** tá»•ng há»£p trong `MyNode`:
```java
class MyNode extends Node<Integer> {
    // Method báº¡n Ä‘Ã£ viáº¿t
    public void setData(Integer data) { /* ... */ }

    // Bridge method do trÃ¬nh biÃªn dá»‹ch táº¡o ra
    public void setData(Object data) {
        // NÃ³ Ã©p kiá»ƒu object vÃ  gá»i method cá»¥ thá»ƒ cá»§a báº¡n
        setData((Integer) data);
    }
}
```
Bridge method nÃ y ghi Ä‘Ã¨ Ä‘Ãºng method `setData(Object)` tá»« lá»›p cha, vÃ  sau Ä‘Ã³ á»§y thÃ¡c cuá»™c gá»i Ä‘áº¿n method `setData(Integer)` cá»¥ thá»ƒ vá» kiá»ƒu cá»§a báº¡n, báº£o toÃ n tÃ­nh Ä‘a hÃ¬nh.

---

#### **2. VÃ­ dá»¥ mÃ£ nguá»“n: Type Erasure Ä‘ang hoáº¡t Ä‘á»™ng**

VÃ­ dá»¥ nÃ y cho tháº¥y ráº±ng táº¡i thá»i Ä‘iá»ƒm cháº¡y, hai danh sÃ¡ch vá»›i cÃ¡c kiá»ƒu generic khÃ¡c nhau cÃ³ cÃ¹ng má»™t lá»›p chÃ­nh xÃ¡c.

```java
import java.util.ArrayList;
import java.util.List;

public class TypeErasureDemo {

    public static void main(String[] args) {
        List<String> stringList = new ArrayList<>();
        List<Integer> integerList = new ArrayList<>();

        System.out.println("Class of stringList: " + stringList.getClass().getName());
        System.out.println("Class of integerList: " + integerList.getClass().getName());

        // Táº¡i thá»i Ä‘iá»ƒm cháº¡y, thÃ´ng tin kiá»ƒu bá»‹ xÃ³a. Cáº£ hai danh sÃ¡ch chá»‰ lÃ  ArrayList.
        if (stringList.getClass() == integerList.getClass()) {
            System.out.println("True: At runtime, List<String> and List<Integer> are the same class.");
        } else {
            System.out.println("False: They are different classes.");
        }

        // --- Minh há»a má»™t háº¡n cháº¿ ---
        // DÃ²ng sau sáº½ gÃ¢y ra lá»—i táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch:
        // if (stringList instanceof ArrayList<String>) {
        //     System.out.println("This check is illegal due to type erasure.");
        // }

        // Viá»‡c kiá»ƒm tra táº¡i thá»i Ä‘iá»ƒm cháº¡y Ä‘Ãºng, nhÆ°ng Ã­t cá»¥ thá»ƒ hÆ¡n:
        if (stringList instanceof ArrayList) {
            System.out.println("This 'instanceof' check is legal.");
        }
    }
}
```

---

#### **3. BÃ i táº­p nhá»**

1.  Táº¡o má»™t method generic `public static <T> void createArray(T item)`.
2.  BÃªn trong method nÃ y, hÃ£y thá»­ táº¡o má»™t máº£ng má»›i cÃ³ kiá»ƒu `T`: `T[] myArray = new T[10];`.
3.  Quan sÃ¡t ráº±ng Ä‘iá»u nÃ y dáº«n Ä‘áº¿n má»™t lá»—i táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch ("generic array creation").
4.  BÃ¢y giá», hÃ£y thá»­ táº¡o má»™t máº£ng `Object` vÃ  Ã©p kiá»ƒu nÃ³: `T[] myArray = (T[]) new Object[10];`.
5.  Quan sÃ¡t cáº£nh bÃ¡o "unchecked cast". Äiá»u nÃ y minh há»a váº¥n Ä‘á» Ã´ nhiá»…m heap (heap pollution) vÃ  táº¡i sao viá»‡c táº¡o máº£ng generic bá»‹ cáº¥m. (ChÃºng ta sáº½ Ä‘á» cáº­p Ä‘áº¿n Ã´ nhiá»…m heap chi tiáº¿t hÆ¡n sau).

---

#### **4. CÃ¢u há»i tráº¯c nghiá»‡m**

**CÃ¢u há»i:** Äoáº¡n mÃ£ Java sau sáº½ in ra gÃ¬?
```java
List<String> list1 = new ArrayList<>();
List<Integer> list2 = new ArrayList<>();
System.out.println(list1.getClass() == list2.getClass());
```

A) `true`
B) `false`
C) NÃ³ sáº½ khÃ´ng biÃªn dá»‹ch.
D) NÃ³ sáº½ nÃ©m ra má»™t `ClassCastException` táº¡i thá»i Ä‘iá»ƒm cháº¡y.

*(Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘Ã¡p Ã¡n)*

...

**ÄÃ¡p Ã¡n:** A) `true`. Do type erasure, thÃ´ng tin kiá»ƒu generic (`<String>` vÃ  `<Integer>`) bá»‹ trÃ¬nh biÃªn dá»‹ch loáº¡i bá». Táº¡i thá»i Ä‘iá»ƒm cháº¡y, cáº£ `list1` vÃ  `list2` Ä‘á»u chá»‰ lÃ  cÃ¡c instance cá»§a lá»›p `ArrayList`, vÃ¬ váº­y cÃ¡c method `getClass()` cá»§a chÃºng tráº£ vá» cÃ¹ng má»™t object `Class`.

### **BÃ i 4: Enums vÃ  CÆ¡ cháº¿ ná»™i bá»™ cá»§a chÃºng**

#### **1. Giáº£i thÃ­ch khÃ¡i niá»‡m**

Má»™t **enum** (viáº¿t táº¯t cá»§a enumeration) lÃ  má»™t kiá»ƒu Java Ä‘áº·c biá»‡t cho phÃ©p má»™t biáº¿n lÃ  má»™t táº­p há»£p cÃ¡c háº±ng sá»‘ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh trÆ°á»›c. Viá»‡c sá»­ dá»¥ng enum lÃ m cho mÃ£ dá»… Ä‘á»c hÆ¡n, an toÃ n vá» kiá»ƒu vÃ  Ã­t bá»‹ lá»—i hÆ¡n so vá»›i viá»‡c sá»­ dá»¥ng cÃ¡c háº±ng sá»‘ sá»‘ nguyÃªn hoáº·c háº±ng sá»‘ chuá»—i.

**Äá»™ng lá»±c: Váº¥n Ä‘á» vá»›i cÃ¡c háº±ng sá»‘ Static**
TrÆ°á»›c khi cÃ³ enum (trÆ°á»›c Java 5), cÃ¡ch phá»• biáº¿n Ä‘á»ƒ biá»ƒu diá»…n má»™t táº­p há»£p cÃ¡c giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh lÃ  "máº«u enum int" hoáº·c "máº«u enum chuá»—i".

```java
// CÃ¡ch cÅ©, khÃ´ng an toÃ n
public class OldCard {
    public static final int SUIT_SPADES = 0;
    public static final int SUIT_HEARTS = 1;
    // ...
    private final int suit;
    public OldCard(int suit) { this.suit = suit; }
}

// CÃ¡c váº¥n Ä‘á» vá»›i máº«u nÃ y:
// 1. KhÃ´ng an toÃ n vá» kiá»ƒu: Báº¡n cÃ³ thá»ƒ truyá»n báº¥t ká»³ sá»‘ nguyÃªn nÃ o vÃ o constructor, vÃ­ dá»¥: new OldCard(99).
// 2. KhÃ´ng cÃ³ khÃ´ng gian tÃªn: CÃ¡c háº±ng sá»‘ thuá»™c vá» lá»›p Card, khÃ´ng pháº£i lÃ  má»™t kiá»ƒu "Suit" riÃªng biá»‡t.
// 3. TÃ­nh dá»… vá»¡: Náº¿u cÃ¡c giÃ¡ trá»‹ háº±ng sá»‘ thay Ä‘á»•i, báº¡n pháº£i biÃªn dá»‹ch láº¡i mÃ£ client.
// 4. KhÃ´ng dá»… Ä‘á»c: Viá»‡c in má»™t biáº¿n suit chá»‰ in ra má»™t con sá»‘ (vÃ­ dá»¥: 1), khÃ´ng pháº£i lÃ  "HEARTS".
```

##### **Giáº£i phÃ¡p `enum`: An toÃ n vá» kiá»ƒu vÃ  máº¡nh máº½**
Enums giáº£i quyáº¿t táº¥t cáº£ cÃ¡c váº¥n Ä‘á» nÃ y. Má»™t enum lÃ  má»™t kiá»ƒu tham chiáº¿u Ä‘áº§y Ä‘á»§, giá»‘ng nhÆ° má»™t lá»›p.

```java
public enum Suit {
    SPADES, HEARTS, DIAMONDS, CLUBS
}

// BÃ¢y giá» mÃ£ Ä‘Ã£ an toÃ n vá» kiá»ƒu:
Card myCard = new Card(Suit.HEARTS);
// new Card(Suit.SPADES, 99); // Lá»–I BIÃŠN Dá»ŠCH! KhÃ´ng cÃ³ constructor nhÆ° váº­y.
```

##### **CÃ¡ch Enums hoáº¡t Ä‘á»™ng bÃªn trong**
ÄÃ¢y lÃ  pháº§n quan trá»ng nháº¥t cáº§n hiá»ƒu. Khi trÃ¬nh biÃªn dá»‹ch gáº·p má»™t khai bÃ¡o `enum`, nÃ³ khÃ´ng chá»‰ táº¡o ra cÃ¡c háº±ng sá»‘. NÃ³ táº¡o ra má»™t **lá»›p Java Ä‘áº§y Ä‘á»§** cÃ³ cÃ¡c thuá»™c tÃ­nh sau:

1.  **Ngáº§m Ä‘á»‹nh lÃ  `final`:** Báº¡n khÃ´ng thá»ƒ táº¡o má»™t lá»›p con cá»§a má»™t enum.
2.  **Ngáº§m Ä‘á»‹nh káº¿ thá»«a `java.lang.Enum`:** Má»i enum ngáº§m Ä‘á»‹nh káº¿ thá»«a tá»« lá»›p `java.lang.Enum`, lá»›p nÃ y cung cáº¥p má»™t sá»‘ method há»¯u Ã­ch.
3.  **CÃ¡c háº±ng sá»‘ Enum lÃ  cÃ¡c Instance `public static final`:** Má»—i háº±ng sá»‘ báº¡n khai bÃ¡o (vÃ­ dá»¥: `HEARTS`) thá»±c ra lÃ  má»™t trÆ°á»ng `public static final` cá»§a chÃ­nh kiá»ƒu enum Ä‘Ã³. Má»—i háº±ng sá»‘ lÃ  má»™t **instance singleton** cá»§a lá»›p enum.

**Nhá»¯ng gÃ¬ trÃ¬nh biÃªn dá»‹ch táº¡o ra (Vá» máº·t khÃ¡i niá»‡m):**
Khi báº¡n viáº¿t `public enum Suit { SPADES, HEARTS }`, trÃ¬nh biÃªn dá»‹ch táº¡o ra má»™t cÃ¡i gÃ¬ Ä‘Ã³ tÆ°Æ¡ng tá»± vá» máº·t khÃ¡i niá»‡m nhÆ° sau:

```java
// Lá»›p khÃ¡i niá»‡m Ä‘Æ°á»£c táº¡o bá»Ÿi trÃ¬nh biÃªn dá»‹ch
public final class Suit extends java.lang.Enum<Suit> {

    // cÃ¡c instance public static final cá»§a lá»›p Suit
    public static final Suit SPADES = new Suit("SPADES", 0);
    public static final Suit HEARTS = new Suit("HEARTS", 1);

    // máº£ng private Ä‘á»ƒ chá»©a táº¥t cáº£ cÃ¡c instance cho values()
    private static final Suit[] $VALUES = { SPADES, HEARTS };

    // constructor private Ä‘á»ƒ ngÄƒn cháº·n viá»‡c khá»Ÿi táº¡o tá»« bÃªn ngoÃ i
    private Suit(String name, int ordinal) {
        super(name, ordinal);
    }

    // method public static Ä‘á»ƒ láº¥y táº¥t cáº£ cÃ¡c giÃ¡ trá»‹
    public static Suit[] values() {
        return $VALUES.clone();
    }

    // method public static Ä‘á»ƒ láº¥y má»™t instance theo tÃªn
    public static Suit valueOf(String name) {
        return Enum.valueOf(Suit.class, name);
    }
}
```

##### **Constructors, Fields, vÃ  Methods cá»§a Enum**
Bá»Ÿi vÃ¬ má»™t enum lÃ  má»™t lá»›p, nÃ³ cÃ³ thá»ƒ cÃ³ táº¥t cáº£ cÃ¡c tÃ­nh nÄƒng cá»§a má»™t lá»›p:
*   **Constructors:** Constructor cá»§a Enum pháº£i lÃ  `private` (hoáº·c package-private). ChÃºng Ä‘Æ°á»£c gá»i má»™t láº§n cho má»—i háº±ng sá»‘ enum táº¡i thá»i Ä‘iá»ƒm lá»›p Ä‘Æ°á»£c táº£i. Báº¡n khÃ´ng thá»ƒ tá»± mÃ¬nh gá»i má»™t constructor cá»§a enum.
*   **Instance Fields:** Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c trÆ°á»ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u liÃªn quan Ä‘áº¿n má»—i háº±ng sá»‘. CÃ¡c trÆ°á»ng nÃ y thÆ°á»ng lÃ  `private` vÃ  `final`.
*   **Methods:** Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c method Ä‘á»ƒ cung cáº¥p hÃ nh vi cho má»—i háº±ng sá»‘.

##### **CÃ¡c Method cá»‘t lÃµi Ä‘Æ°á»£c cung cáº¥p bá»Ÿi `java.lang.Enum`**
*   **`name()`:** Tráº£ vá» tÃªn cá»§a háº±ng sá»‘ enum, chÃ­nh xÃ¡c nhÆ° nÃ³ Ä‘Æ°á»£c khai bÃ¡o trong mÃ£ cá»§a báº¡n (vÃ­ dá»¥: "HEARTS").
*   **`ordinal()`:** Tráº£ vá» vá»‹ trÃ­ dá»±a trÃªn 0 cá»§a háº±ng sá»‘ trong thá»© tá»± khai bÃ¡o cá»§a nÃ³ (vÃ­ dá»¥: `SPADES.ordinal()` lÃ  0, `HEARTS.ordinal()` lÃ  1). **Thá»±c hÃ nh tá»‘t nháº¥t:** TrÃ¡nh sá»­ dá»¥ng `ordinal()` cho logic nghiá»‡p vá»¥, vÃ¬ nÃ³ ráº¥t dá»… vá»¡. Náº¿u báº¡n sáº¯p xáº¿p láº¡i cÃ¡c háº±ng sá»‘, cÃ¡c giÃ¡ trá»‹ ordinal sáº½ thay Ä‘á»•i, lÃ m há»ng mÃ£ cá»§a báº¡n. HÃ£y sá»­ dá»¥ng má»™t trÆ°á»ng instance thay tháº¿ náº¿u báº¡n cáº§n liÃªn káº¿t má»™t giÃ¡ trá»‹ vá»›i má»™t háº±ng sá»‘.
*   **`values()`:** Má»™t method static Ä‘Æ°á»£c trÃ¬nh biÃªn dá»‹ch thÃªm vÃ o, tráº£ vá» má»™t máº£ng chá»©a táº¥t cáº£ cÃ¡c háº±ng sá»‘ enum theo thá»© tá»± khai bÃ¡o cá»§a chÃºng.
*   **`valueOf(String name)`:** Má»™t method static Ä‘Æ°á»£c trÃ¬nh biÃªn dá»‹ch thÃªm vÃ o, tráº£ vá» háº±ng sá»‘ enum cÃ³ tÃªn Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. NÃ©m ra `IllegalArgumentException` náº¿u háº±ng sá»‘ khÃ´ng tá»“n táº¡i.

---

#### **2. VÃ­ dá»¥ mÃ£ nguá»“n: Enum vá»›i Fields vÃ  Methods**

VÃ­ dá»¥ nÃ y cho tháº¥y má»™t enum `Planet` vá»›i dá»¯ liá»‡u (khá»‘i lÆ°á»£ng, bÃ¡n kÃ­nh) vÃ  hÃ nh vi (tÃ­nh toÃ¡n trá»ng lá»±c bá» máº·t).

```java
public enum Planet {
    // CÃ¡c háº±ng sá»‘ Enum cÃ³ thá»ƒ gá»i má»™t constructor
    MERCURY(3.303e+23, 2.4397e6),
    VENUS(4.869e+24, 6.0518e6),
    EARTH(5.976e+24, 6.37814e6),
    MARS(6.421e+23, 3.3972e6);

    // CÃ¡c trÆ°á»ng instance cho má»—i háº±ng sá»‘
    private final double mass;   // tÃ­nh báº±ng kilogam
    private final double radius; // tÃ­nh báº±ng mÃ©t
    public static final double G = 6.67300E-11; // Háº±ng sá»‘ háº¥p dáº«n vÅ© trá»¥

    // Constructor (pháº£i lÃ  private)
    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    }

    // Method public Ä‘á»ƒ cung cáº¥p hÃ nh vi
    public double surfaceGravity() {
        return G * mass / (radius * radius);
    }

    public double getMass() { return mass; }
    public double getRadius() { return radius; }
}

class EnumDemo {
    public static void main(String[] args) {
        Planet earth = Planet.EARTH;
        System.out.printf("Surface gravity on %s is %.2f m/s^2\n",
                          earth.name(), earth.surfaceGravity());

        // Sá»­ dá»¥ng method values() do trÃ¬nh biÃªn dá»‹ch táº¡o ra
        System.out.println("\nAll planets in order of declaration (ordinal):");
        for (Planet p : Planet.values()) {
            System.out.printf("- %s (ordinal %d)\n", p.name(), p.ordinal());
        }
    }
}
```

---

#### **3. BÃ i táº­p nhá»**

1.  Táº¡o má»™t enum cÃ³ tÃªn `Tier` vá»›i ba háº±ng sá»‘: `BRONZE`, `SILVER`, vÃ  `GOLD`.
2.  ThÃªm má»™t trÆ°á»ng `private final int minPoints` vÃ o enum.
3.  Táº¡o má»™t constructor private cháº¥p nháº­n má»™t sá»‘ nguyÃªn cho sá»‘ Ä‘iá»ƒm tá»‘i thiá»ƒu.
4.  LiÃªn káº¿t cÃ¡c Ä‘iá»ƒm sau vá»›i cÃ¡c báº­c: `BRONZE(0)`, `SILVER(1000)`, `GOLD(5000)`.
5.  Táº¡o má»™t method `public static Tier forPoints(int points)` láº·p qua `Tier.values()` vÃ  tráº£ vá» báº­c cao nháº¥t mÃ  má»™t ngÆ°á»i dÃ¹ng Ä‘á»§ Ä‘iá»u kiá»‡n dá»±a trÃªn Ä‘iá»ƒm cá»§a há». VÃ­ dá»¥, náº¿u má»™t ngÆ°á»i dÃ¹ng cÃ³ 2500 Ä‘iá»ƒm, nÃ³ nÃªn tráº£ vá» `SILVER`.
6.  Kiá»ƒm tra method `forPoints` cá»§a báº¡n trong `main`.

---

#### **4. CÃ¢u há»i tráº¯c nghiá»‡m**

**CÃ¢u há»i:** CÃ¢u nÃ o sau Ä‘Ã¢y vá» enum trong Java lÃ  **sai**?

A) Má»™t enum cÃ³ thá»ƒ triá»ƒn khai má»™t interface.
B) Báº¡n cÃ³ thá»ƒ táº¡o má»™t instance má»›i cá»§a má»™t enum báº±ng cÃ¡ch sá»­ dá»¥ng tá»« khÃ³a `new` (vÃ­ dá»¥: `new Planet()`).
C) Constructor cá»§a má»™t enum pháº£i lÃ  `private` hoáº·c package-private.
D) Má»—i háº±ng sá»‘ enum lÃ  má»™t instance `public static final` cá»§a kiá»ƒu enum.

*(Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘Ã¡p Ã¡n)*

...

**ÄÃ¡p Ã¡n:** B) Báº¡n cÃ³ thá»ƒ táº¡o má»™t instance má»›i cá»§a má»™t enum báº±ng cÃ¡ch sá»­ dá»¥ng tá»« khÃ³a `new` (vÃ­ dá»¥: `new Planet()`). Äiá»u nÃ y lÃ  sai. TrÃ¬nh biÃªn dá»‹ch chá»‹u trÃ¡ch nhiá»‡m duy nháº¥t trong viá»‡c táº¡o ra cÃ¡c instance cá»§a cÃ¡c háº±ng sá»‘ enum. Constructor ngáº§m Ä‘á»‹nh lÃ  private Ä‘á»ƒ ngÄƒn cháº·n báº¥t ká»³ viá»‡c khá»Ÿi táº¡o nÃ o tá»« bÃªn ngoÃ i, Ä‘áº£m báº£o ráº±ng chá»‰ cÃ³ táº­p há»£p cÃ¡c instance Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh trÆ°á»›c tá»“n táº¡i.

### **BÃ i 5: `EnumMap`, `EnumSet`, vÃ  CÃ¡ch sá»­ dá»¥ng Enum nÃ¢ng cao**

#### **1. Giáº£i thÃ­ch khÃ¡i niá»‡m**

Bá»Ÿi vÃ¬ enum lÃ  má»™t kiá»ƒu Ä‘áº·c biá»‡t Ä‘Æ°á»£c trÃ¬nh biÃªn dá»‹ch biáº¿t Ä‘áº¿n, Java Collections Framework cung cáº¥p hai triá»ƒn khai Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a cao, `EnumSet` vÃ  `EnumMap`, hiá»‡u quáº£ hÆ¡n Ä‘Ã¡ng ká»ƒ so vá»›i cÃ¡c Ä‘á»‘i tÃ¡c Ä‘a nÄƒng cá»§a chÃºng (`HashSet` vÃ  `HashMap`).

##### **`EnumSet` - `Set` hiá»‡u suáº¥t cao cho Enums**

*   **Cáº¥u trÃºc ná»™i bá»™:** Má»™t `EnumSet` **khÃ´ng** Ä‘Æ°á»£c há»— trá»£ bá»Ÿi má»™t báº£ng bÄƒm. BÃªn trong, nÃ³ thÆ°á»ng Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng má»™t **vector bitwise**, thÆ°á»ng lÃ  má»™t `long` duy nháº¥t (hoáº·c má»™t máº£ng `long` cho cÃ¡c enum cÃ³ hÆ¡n 64 háº±ng sá»‘).
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Má»—i bit trong `long` tÆ°Æ¡ng á»©ng vá»›i `ordinal()` cá»§a má»™t háº±ng sá»‘ enum. Náº¿u má»™t háº±ng sá»‘ cÃ³ trong táº­p há»£p, bit tÆ°Æ¡ng á»©ng cá»§a nÃ³ Ä‘Æ°á»£c Ä‘áº·t thÃ nh `1`; náº¿u khÃ´ng, nÃ³ lÃ  `0`.
    **VÃ­ dá»¥ tÆ°Æ¡ng tá»±:** Náº¿u `Tier` lÃ  `BRONZE(0), SILVER(1), GOLD(2)`, má»™t táº­p há»£p chá»©a `BRONZE` vÃ  `GOLD` sáº½ Ä‘Æ°á»£c biá»ƒu diá»…n báº±ng giÃ¡ trá»‹ nhá»‹ phÃ¢n `...0101`, trong Ä‘Ã³ cÃ¡c bit thá»© 0 vÃ  thá»© 2 Ä‘Æ°á»£c báº­t.
*   **Hiá»‡u suáº¥t:** Táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng cÆ¡ báº£n cá»§a nÃ³ (`add`, `contains`, `remove`) Ä‘Æ°á»£c thá»±c hiá»‡n trong **thá»i gian khÃ´ng Ä‘á»•i O(1)** vÃ  cá»±c ká»³ nhanh. Äiá»u nÃ y lÃ  do chÃºng lÃ  cÃ¡c phÃ©p toÃ¡n sá»‘ há»c bitwise Ä‘Æ¡n giáº£n, nhanh hÆ¡n nhiá»u so vá»›i viá»‡c tÃ­nh toÃ¡n mÃ£ bÄƒm vÃ  xá»­ lÃ½ cÃ¡c bucket máº£ng.
*   **Táº¡o:** Báº¡n khÃ´ng thá»ƒ táº¡o má»™t `EnumSet` báº±ng `new`. Báº¡n pháº£i sá»­ dá»¥ng má»™t trong cÃ¡c phÆ°Æ¡ng thá»©c factory tÄ©nh cá»§a nÃ³, cháº³ng háº¡n nhÆ°:
    *   `EnumSet.of(E... elements)`: Táº¡o má»™t táº­p há»£p vá»›i cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.
    *   `EnumSet.allOf(Class<E> elementType)`: Táº¡o má»™t táº­p há»£p chá»©a táº¥t cáº£ cÃ¡c háº±ng sá»‘ cá»§a enum.
    *   `EnumSet.noneOf(Class<E> elementType)`: Táº¡o má»™t táº­p há»£p rá»—ng cho kiá»ƒu enum Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.
    *   `EnumSet.range(E from, E to)`: Táº¡o má»™t táº­p há»£p chá»©a táº¥t cáº£ cÃ¡c háº±ng sá»‘ trong pháº¡m vi tá»« `from` Ä‘áº¿n `to`, bao gá»“m cáº£ hai.
*   **Thá»© tá»±:** Iterator cho má»™t `EnumSet` luÃ´n tráº£ vá» cÃ¡c pháº§n tá»­ theo **thá»© tá»± tá»± nhiÃªn** cá»§a chÃºng (thá»© tá»± chÃºng Ä‘Æ°á»£c khai bÃ¡o trong enum).

##### **`EnumMap` - `Map` hiá»‡u suáº¥t cao cho cÃ¡c khÃ³a Enum**

*   **Cáº¥u trÃºc ná»™i bá»™:** Má»™t `EnumMap` **khÃ´ng** Ä‘Æ°á»£c há»— trá»£ bá»Ÿi má»™t báº£ng bÄƒm. BÃªn trong, nÃ³ Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng má»™t **máº£ng Ä‘Æ¡n giáº£n**.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** `ordinal()` cá»§a khÃ³a Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m chá»‰ sá»‘ trá»±c tiáº¿p vÃ o máº£ng ná»™i bá»™. GiÃ¡ trá»‹ Ä‘Æ°á»£c lÆ°u trá»¯ táº¡i `array[key.ordinal()]`.
*   **Hiá»‡u suáº¥t:** Bá»Ÿi vÃ¬ nÃ³ sá»­ dá»¥ng chá»‰ sá»‘ máº£ng trá»±c tiáº¿p thay vÃ¬ bÄƒm, táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng cÆ¡ báº£n (`put`, `get`, `containsKey`) Ä‘Æ°á»£c thá»±c hiá»‡n trong **thá»i gian khÃ´ng Ä‘á»•i O(1)** vÃ  nhanh hÆ¡n vÃ  dá»… dá»± Ä‘oÃ¡n hÆ¡n nhiá»u so vá»›i `HashMap`.
*   **Táº¡o:** Báº¡n pháº£i cung cáº¥p Ä‘á»‘i tÆ°á»£ng `Class` cá»§a enum cho constructor Ä‘á»ƒ nÃ³ biáº¿t kÃ­ch thÆ°á»›c cá»§a máº£ng cáº§n táº¡o. `Map<MyEnum, String> map = new EnumMap<>(MyEnum.class);`
*   **Thá»© tá»±:** CÃ¡c collection view cá»§a map (`keySet()`, `entrySet()`, `values()`) láº·p qua cÃ¡c pháº§n tá»­ theo **thá»© tá»± tá»± nhiÃªn** cá»§a cÃ¡c khÃ³a enum.

##### **Triá»ƒn khai Interfaces vÃ  Abstract Methods**
Enum cÃ³ thá»ƒ cung cáº¥p hÃ nh vi khÃ¡c nhau cho má»—i háº±ng sá»‘. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c theo hai cÃ¡ch chÃ­nh:

1.  **CÃ¢u lá»‡nh Switch trong má»™t Method:** Má»™t cÃ¡ch Ä‘Æ¡n giáº£n lÃ  cÃ³ má»™t method trong enum chuyá»ƒn Ä‘á»•i trÃªn `this`. Äiá»u nÃ y sáº¡ch sáº½ cho logic Ä‘Æ¡n giáº£n nhÆ°ng cÃ³ thá»ƒ vi pháº¡m NguyÃªn táº¯c ÄÃ³ng/Má»Ÿ náº¿u báº¡n thÆ°á»ng xuyÃªn thÃªm cÃ¡c háº±ng sá»‘ má»›i.

2.  **Triá»ƒn khai Method cá»¥ thá»ƒ cho háº±ng sá»‘:** Má»™t cÃ¡ch tiáº¿p cáº­n máº¡nh máº½ vÃ  hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng hÆ¡n lÃ  khai bÃ¡o má»™t method `abstract` trong enum vÃ  Ä‘á»ƒ má»—i háº±ng sá»‘ cung cáº¥p triá»ƒn khai cá»¥ thá»ƒ cá»§a riÃªng nÃ³. Äiá»u nÃ y buá»™c má»i háº±ng sá»‘ pháº£i Ä‘á»‹nh nghÄ©a hÃ nh vi cá»§a nÃ³.

---

#### **2. VÃ­ dá»¥ mÃ£ nguá»“n: `EnumMap` vÃ  cÃ¡c Method cá»¥ thá»ƒ cho háº±ng sá»‘**

VÃ­ dá»¥ nÃ y minh há»a viá»‡c sá»­ dá»¥ng má»™t `EnumMap` Ä‘á»ƒ theo dÃµi cÃ¡c giai Ä‘oáº¡n cá»§a má»™t dá»± Ã¡n vÃ  má»™t enum `Operation` nÆ¡i má»—i háº±ng sá»‘ triá»ƒn khai method `apply` cá»§a riÃªng nÃ³.

```java
import java.util.EnumMap;
import java.util.EnumSet;
import java.util.Map;

// 1. Enum cho EnumSet vÃ  EnumMap
enum Day {
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
}

// 2. Enum vá»›i triá»ƒn khai method cá»¥ thá»ƒ cho háº±ng sá»‘
enum Operation {
    PLUS {
        public double apply(double x, double y) { return x + y; }
    },
    MINUS {
        public double apply(double x, double y) { return x - y; }
    },
    TIMES {
        public double apply(double x, double y) { return x * y; }
    },
    DIVIDE {
        public double apply(double x, double y) { return x / y; }
    };

    // Abstract method mÃ  má»—i háº±ng sá»‘ PHáº¢I triá»ƒn khai
    public abstract double apply(double x, double y);
}


public class AdvancedEnumDemo {
    public static void main(String[] args) {
        // --- Demo EnumSet ---
        // Má»™t táº­p há»£p nhá» gá»n vÃ  hiá»‡u quáº£ cá»§a cÃ¡c ngÃ y cuá»‘i tuáº§n
        EnumSet<Day> weekend = EnumSet.of(Day.SATURDAY, Day.SUNDAY);
        System.out.println("Weekend days: " + weekend);
        System.out.println("Does the weekend include MONDAY? " + weekend.contains(Day.MONDAY)); // false

        // --- Demo EnumMap ---
        // Má»™t map hiá»‡u suáº¥t cao tá»« NgÃ y Ä‘áº¿n lá»‹ch trÃ¬nh cÃ´ng viá»‡c
        Map<Day, String> schedule = new EnumMap<>(Day.class);
        schedule.put(Day.MONDAY, "Team Meeting");
        schedule.put(Day.FRIDAY, "Code Freeze");
        schedule.put(Day.WEDNESDAY, "Deployment");
        System.out.println("\nSchedule for WEDNESDAY: " + schedule.get(Day.WEDNESDAY));

        // --- Demo Method cá»¥ thá»ƒ cho háº±ng sá»‘ ---
        double x = 4.0;
        double y = 2.0;
        System.out.println("\n--- Operations ---");
        for (Operation op : Operation.values()) {
            System.out.printf("%.1f %s %.1f = %.1f\n", x, op, y, op.apply(x, y));
        }
    }
}
```

---

#### **3. BÃ i táº­p nhá»**

Báº¡n Ä‘ang mÃ´ hÃ¬nh hÃ³a má»™t há»‡ thá»‘ng Ä‘Ã¨n giao thÃ´ng.
1.  Táº¡o má»™t `enum` cÃ³ tÃªn `TrafficLight`.
2.  CÃ¡c háº±ng sá»‘ nÃªn lÃ  `RED`, `AMBER`, vÃ  `GREEN`.
3.  Má»—i háº±ng sá»‘ cáº§n biáº¿t `duration` (tÃ­nh báº±ng giÃ¢y) mÃ  nÃ³ nÃªn sÃ¡ng. `RED(30)`, `AMBER(5)`, `GREEN(45)`. ThÃªm má»™t trÆ°á»ng vÃ  má»™t constructor cho viá»‡c nÃ y.
4.  ThÃªm má»™t method `abstract` vÃ o enum cÃ³ tÃªn `next()`.
5.  Triá»ƒn khai method `next()` cho má»—i háº±ng sá»‘ Ä‘á»ƒ tráº£ vá» Ä‘Ã¨n tiáº¿p theo trong chuá»—i (vÃ­ dá»¥: `GREEN.next()` tráº£ vá» `AMBER`, `AMBER.next()` tráº£ vá» `RED`, vÃ  `RED.next()` tráº£ vá» `GREEN`).
6.  Trong `main`, báº¯t Ä‘áº§u vá»›i `GREEN`, sau Ä‘Ã³ láº·p 10 láº§n, in ra tÃªn vÃ  thá»i lÆ°á»£ng cá»§a Ä‘Ã¨n hiá»‡n táº¡i, vÃ  sau Ä‘Ã³ chuyá»ƒn sang Ä‘Ã¨n `next()`.

---

#### **4. CÃ¢u há»i tráº¯c nghiá»‡m**

**CÃ¢u há»i:** Táº¡i sao má»™t `EnumMap` thÆ°á»ng nhanh hÆ¡n má»™t `HashMap` khi sá»­ dá»¥ng má»™t enum lÃ m khÃ³a?

A) `EnumMap` luÃ´n Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a, Ä‘iá»u nÃ y cáº£i thiá»‡n hiá»‡u suáº¥t.
B) `EnumMap` sá»­ dá»¥ng má»™t cÃ¢y nhá»‹ phÃ¢n cÃ¢n báº±ng, nhanh hÆ¡n so vá»›i bÄƒm.
C) `EnumMap` sá»­ dá»¥ng giÃ¡ trá»‹ `ordinal()` cá»§a enum lÃ m chá»‰ sá»‘ trá»±c tiáº¿p vÃ o má»™t máº£ng, trÃ¡nh Ä‘Æ°á»£c chi phÃ­ tÃ­nh toÃ¡n `hashCode()` vÃ  xá»­ lÃ½ xung Ä‘á»™t.
D) `EnumMap` sá»­ dá»¥ng má»™t thuáº­t toÃ¡n bÄƒm hiá»‡u quáº£ hÆ¡n Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t cho cÃ¡c enum.

*(Cuá»™n xuá»‘ng Ä‘á»ƒ xem Ä‘Ã¡p Ã¡n)*

...

**ÄÃ¡p Ã¡n:** C) `EnumMap` sá»­ dá»¥ng giÃ¡ trá»‹ `ordinal()` cá»§a enum lÃ m chá»‰ sá»‘ trá»±c tiáº¿p vÃ o má»™t máº£ng, trÃ¡nh Ä‘Æ°á»£c chi phÃ­ tÃ­nh toÃ¡n `hashCode()` vÃ  xá»­ lÃ½ xung Ä‘á»™t. Viá»‡c truy cáº­p máº£ng trá»±c tiáº¿p nÃ y lÃ  má»™t hoáº¡t Ä‘á»™ng O(1) Ä‘Æ¡n giáº£n, nhanh hÆ¡n vÃ  hiá»‡u quáº£ vá» bá»™ nhá»› hÆ¡n Ä‘Ã¡ng ká»ƒ so vá»›i quÃ¡ trÃ¬nh bÄƒm, tÃ­nh toÃ¡n chá»‰ sá»‘ vÃ  giáº£i quyáº¿t xung Ä‘á»™t tiá»m nÄƒng phá»©c táº¡p hÆ¡n Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi `HashMap`.

### **BÃ i 6: TÃ³m táº¯t chá»§ Ä‘á», CÃ¢u há»i phá»ng váº¥n, vÃ  Dá»± Ã¡n cuá»‘i cÃ¹ng**

BÃ i há»c cuá»‘i cÃ¹ng nÃ y cá»§ng cá»‘ sá»± tÃ¬m hiá»ƒu sÃ¢u cá»§a chÃºng ta vá» Java Generics vÃ  Enums. ChÃºng ta sáº½ tÃ³m táº¯t cÃ¡c khÃ¡i niá»‡m chÃ­nh, xem láº¡i cÃ¡c cÃ¢u há»i phá»ng váº¥n phá»• biáº¿n, vÃ  Ã¡p dá»¥ng má»i thá»© trong má»™t dá»± Ã¡n nhá» thá»±c táº¿ káº¿t há»£p cáº£ hai tÃ­nh nÄƒng.

---

#### **1. Báº£ng tÃ³m táº¯t cÃ¡c Ä‘iá»ƒm chÃ­nh**

| KhÃ¡i niá»‡m | Äiá»ƒm chÃ­nh & CÃº phÃ¡p |
| :--- | :--- |
| **Generics** | Cung cáº¥p an toÃ n kiá»ƒu táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch vÃ  tÃ¡i sá»­ dá»¥ng mÃ£. Loáº¡i bá» sá»± cáº§n thiáº¿t cá»§a viá»‡c Ã©p kiá»ƒu tÆ°á»ng minh. |
| **Lá»›p/Interface Generic** | `class MyClass<T> { ... }` |
| **Method Generic** | `<T> T myMethod(T arg) { ... }` |
| **Tham sá»‘ kiá»ƒu cÃ³ giá»›i háº¡n** | `class MyClass<T extends Number> { ... }` (Háº¡n cháº¿ `T` lÃ  `Number` hoáº·c cÃ¡c subtype cá»§a nÃ³). |
| **Nhiá»u giá»›i háº¡n** | `<T extends ClassA & InterfaceB & InterfaceC>` |
| **Wildcard: Giá»›i háº¡n trÃªn** | `void process(List<? extends Number> list)` - **Producer Extends**: Truy cáº­p chá»‰ Ä‘á»c. |
| **Wildcard: Giá»›i háº¡n dÆ°á»›i** | `void addInts(List<? super Integer> list)` - **Consumer Super**: Truy cáº­p chá»‰ ghi cho cÃ¡c `Integer`. |
| **Wildcard: KhÃ´ng giá»›i háº¡n** | `void printSize(List<?> list)` - Cho cÃ¡c hoáº¡t Ä‘á»™ng khÃ´ng phá»¥ thuá»™c vÃ o kiá»ƒu. |
| **Type Erasure** | Generics lÃ  má»™t tÃ­nh nÄƒng táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch. ThÃ´ng tin kiá»ƒu bá»‹ xÃ³a táº¡i thá»i Ä‘iá»ƒm cháº¡y. `List<String>` trá»Ÿ thÃ nh `List`. Dáº«n Ä‘áº¿n cÃ¡c háº¡n cháº¿ nhÆ° `new T()` vÃ  `instanceof T` lÃ  báº¥t há»£p phÃ¡p. |
| **Enums** | Má»™t lá»›p Ä‘áº·c biá»‡t Ä‘áº¡i diá»‡n cho má»™t táº­p há»£p cÃ¡c háº±ng sá»‘ cá»‘ Ä‘á»‹nh. Cung cáº¥p an toÃ n kiá»ƒu so vá»›i cÃ¡c háº±ng sá»‘ `int` hoáº·c `String` tÄ©nh. |
| **Khai bÃ¡o Enum** | `public enum Status { PENDING, ACTIVE, INACTIVE }` |
| **Ná»™i bá»™ Enum** | Má»—i háº±ng sá»‘ lÃ  má»™t instance singleton `public static final` cá»§a lá»›p enum, lá»›p nÃ y ngáº§m káº¿ thá»«a `java.lang.Enum`. |
| **Enums vá»›i Tráº¡ng thÃ¡i/HÃ nh vi**| Enums cÃ³ thá»ƒ cÃ³ cÃ¡c constructor `private`, cÃ¡c trÆ°á»ng `final`, vÃ  cÃ¡c method. Má»—i háº±ng sá»‘ tháº­m chÃ­ cÃ³ thá»ƒ ghi Ä‘Ã¨ má»™t method `abstract` cho hÃ nh vi cá»¥ thá»ƒ. |
| **`EnumSet` & `EnumMap`** | CÃ¡c triá»ƒn khai `Set` vÃ  `Map` Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a cao cho cÃ¡c kiá»ƒu enum. Sá»­ dá»¥ng cÃ¡c vector bitwise (`EnumSet`) vÃ  cÃ¡c máº£ng (`EnumMap`) thay vÃ¬ bÄƒm, cung cáº¥p hiá»‡u suáº¥t O(1) vÆ°á»£t trá»™i. |

---

#### **2. CÃ¡c cÃ¢u há»i phá»ng váº¥n phá»• biáº¿n**

1.  **"Type erasure lÃ  gÃ¬ vÃ  táº¡i sao nÃ³ tá»“n táº¡i trong Java?"**
    *   *Tráº£ lá»i:* Type erasure lÃ  quÃ¡ trÃ¬nh trong Ä‘Ã³ trÃ¬nh biÃªn dá»‹ch loáº¡i bá» thÃ´ng tin kiá»ƒu generic táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch, thay tháº¿ cÃ¡c tham sá»‘ kiá»ƒu báº±ng cÃ¡c giá»›i háº¡n cá»§a chÃºng hoáº·c báº±ng `Object`. Táº¡i thá»i Ä‘iá»ƒm cháº¡y, JVM chá»‰ tháº¥y cÃ¡c raw type. Äiá»u nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n Ä‘á»ƒ Ä‘áº£m báº£o kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch ngÆ°á»£c, cho phÃ©p mÃ£ generic má»›i tÆ°Æ¡ng tÃ¡c vá»›i mÃ£ vÃ  thÆ° viá»‡n káº¿ thá»«a cÅ©, khÃ´ng generic.

2.  **"Giáº£i thÃ­ch nguyÃªn táº¯c PECS (Producer Extends, Consumer Super). Cho má»™t vÃ­ dá»¥."**
    *   *Tráº£ lá»i:* PECS lÃ  má»™t cÃ¢u ghi nhá»› Ä‘á»ƒ sá»­ dá»¥ng cÃ¡c kÃ½ tá»± Ä‘áº¡i diá»‡n trong cÃ¡c API generic. "Producer Extends" cÃ³ nghÄ©a lÃ  náº¿u má»™t collection generic lÃ  má»™t *producer* mÃ  tá»« Ä‘Ã³ báº¡n chá»‰ Ä‘á»c cÃ¡c má»¥c, hÃ£y sá»­ dá»¥ng `? extends T`. VÃ­ dá»¥: danh sÃ¡ch nguá»“n cá»§a má»™t method `copy`. "Consumer Super" cÃ³ nghÄ©a lÃ  náº¿u má»™t collection lÃ  má»™t *consumer* mÃ  báº¡n chá»‰ ghi cÃ¡c má»¥c vÃ o, hÃ£y sá»­ dá»¥ng `? super T`. VÃ­ dá»¥: danh sÃ¡ch Ä‘Ã­ch cá»§a method `copy`. Äiá»u nÃ y lÃ m cho API linh hoáº¡t hÆ¡n. Má»™t method `copy(List<? extends Number> src, List<? super Number> dest)` cÃ³ thá»ƒ sao chÃ©p má»™t `List<Integer>` vÃ o má»™t `List<Object>`.

3.  **"Báº¡n cÃ³ thá»ƒ táº¡o má»™t máº£ng generic nhÆ° `new T[10]` khÃ´ng? Táº¡i sao cÃ³ hoáº·c táº¡i sao khÃ´ng?"**
    *   *Tráº£ lá»i:* KhÃ´ng, báº¡n khÃ´ng thá»ƒ. ÄÃ¢y lÃ  má»™t háº¡n cháº¿ gÃ¢y ra bá»Ÿi type erasure. CÃ¡c máº£ng trong Java lÃ  reifiable, cÃ³ nghÄ©a lÃ  chÃºng biáº¿t kiá»ƒu thÃ nh pháº§n cá»§a chÃºng táº¡i thá»i Ä‘iá»ƒm cháº¡y Ä‘á»ƒ thá»±c thi an toÃ n lÆ°u trá»¯ máº£ng. Náº¿u báº¡n cÃ³ thá»ƒ táº¡o `new T[10]`, `T` sáº½ bá»‹ xÃ³a thÃ nh `Object` táº¡i thá»i Ä‘iá»ƒm cháº¡y, táº¡o ra má»™t `Object[]`. Náº¿u máº£ng nÃ y sau Ä‘Ã³ Ä‘Æ°á»£c gÃ¡n cho má»™t tham chiáº¿u `String[]`, báº¡n cÃ³ thá»ƒ thÃªm má»™t `Integer` vÃ o nÃ³ mÃ  khÃ´ng cÃ³ `ArrayStoreException`, phÃ¡ vá»¡ há»‡ thá»‘ng kiá»ƒu.

4.  **"MÃ´ táº£ cÃ¡ch má»™t `EnumMap` hoáº¡t Ä‘á»™ng bÃªn trong vÃ  táº¡i sao nÃ³ hiá»‡u quáº£ hÆ¡n má»™t `HashMap` Ä‘á»‘i vá»›i cÃ¡c khÃ³a enum."**
    *   *Tráº£ lá»i:* Má»™t `EnumMap` Ä‘Æ°á»£c há»— trá»£ bá»Ÿi má»™t máº£ng Ä‘Æ¡n giáº£n, khÃ´ng pháº£i lÃ  má»™t báº£ng bÄƒm. NÃ³ sá»­ dá»¥ng `ordinal()` cá»§a khÃ³a enum lÃ m chá»‰ sá»‘ trá»±c tiáº¿p vÃ o máº£ng nÃ y. Äiá»u nÃ y trÃ¡nh Ä‘Æ°á»£c toÃ n bá»™ chi phÃ­ tÃ­nh toÃ¡n mÃ£ bÄƒm, xá»­ lÃ½ xung Ä‘á»™t bÄƒm, vÃ  thay Ä‘á»•i kÃ­ch thÆ°á»›c má»™t báº£ng bÄƒm. Káº¿t quáº£ lÃ  má»™t hiá»‡u suáº¥t O(1) Ä‘Æ°á»£c Ä‘áº£m báº£o, cÃ³ thá»ƒ dá»± Ä‘oÃ¡n Ä‘Æ°á»£c cho táº¥t cáº£ cÃ¡c hoáº¡t Ä‘á»™ng cÆ¡ báº£n, nhanh hÆ¡n vÃ  hiá»‡u quáº£ vá» bá»™ nhá»› hÆ¡n Ä‘Ã¡ng ká»ƒ so vá»›i `HashMap`.

5.  **"LÃ m tháº¿ nÃ o báº¡n cÃ³ thá»ƒ lÃ m cho má»—i háº±ng sá»‘ enum cÃ³ má»™t hÃ nh vi khÃ¡c nhau cho má»™t method?"**
    *   *Tráº£ lá»i:* CÃ¡ch máº¡nh máº½ vÃ  hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng nháº¥t lÃ  khai bÃ¡o má»™t method `abstract` trong enum, vÃ  sau Ä‘Ã³ cung cáº¥p má»™t triá»ƒn khai cá»¥ thá»ƒ cho method Ä‘Ã³ trong pháº§n thÃ¢n cá»§a má»—i háº±ng sá»‘ enum riÃªng láº». Äiá»u nÃ y buá»™c má»i háº±ng sá»‘ pháº£i Ä‘á»‹nh nghÄ©a hÃ nh vi vÃ  trÃ¡nh cÃ¡c cÃ¢u lá»‡nh `switch` lá»™n xá»™n, tuÃ¢n thá»§ NguyÃªn táº¯c ÄÃ³ng/Má»Ÿ.

---

#### **3. Dá»± Ã¡n nhá» cuá»‘i cÃ¹ng: Má»™t Registry Command an toÃ n vá» kiá»ƒu**

Dá»± Ã¡n nÃ y káº¿t há»£p generics vÃ  enums Ä‘á»ƒ táº¡o ra má»™t há»‡ thá»‘ng linh hoáº¡t, an toÃ n vá» kiá»ƒu Ä‘á»ƒ Ä‘Äƒng kÃ½ vÃ  thá»±c thi cÃ¡c loáº¡i command khÃ¡c nhau.

**ğŸ¯ Má»¥c tiÃªu:** XÃ¢y dá»±ng má»™t `CommandRegistry` cÃ³ thá»ƒ lÆ°u trá»¯ vÃ  truy xuáº¥t cÃ¡c trÃ¬nh xá»­ lÃ½ command dá»±a trÃªn má»™t khÃ³a enum, nÆ¡i má»—i trÃ¬nh xá»­ lÃ½ chá»‹u trÃ¡ch nhiá»‡m cho má»™t loáº¡i object command cá»¥ thá»ƒ.

**YÃªu cáº§u dá»± Ã¡n:**

1.  **Interface `Command` (Generic):**
    *   Táº¡o má»™t interface Ä‘Ã¡nh dáº¥u generic, Ä‘Æ¡n giáº£n: `interface Command<R> { }`. `R` sáº½ Ä‘áº¡i diá»‡n cho kiá»ƒu tráº£ vá» cá»§a command.

2.  **CÃ¡c lá»›p Command cá»¥ thá»ƒ:**
    *   Táº¡o hai lá»›p command Ä‘Æ¡n giáº£n triá»ƒn khai interface `Command`:
        *   `CreateUserCommand implements Command<UUID>`: NÃªn chá»©a cÃ¡c trÆ°á»ng nhÆ° `username` vÃ  `password`.
        *   `GetUserCommand implements Command<User>`: NÃªn chá»©a má»™t trÆ°á»ng `userId`.
    *   (Báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c lá»›p giáº£ `User` vÃ  `UUID` hoáº·c sá»­ dá»¥ng `java.util.UUID`).

3.  **Interface `CommandHandler` (Generic):**
    *   Táº¡o má»™t interface generic: `interface CommandHandler<C extends Command<R>, R>`.
    *   NÃ³ nÃªn cÃ³ má»™t method: `R handle(C command)`. TrÃ¬nh xá»­ lÃ½ nÃ y nháº­n má»™t loáº¡i command cá»¥ thá»ƒ vÃ  tráº£ vá» má»™t loáº¡i káº¿t quáº£ cá»¥ thá»ƒ.

4.  **Enum `CommandType`:**
    *   Táº¡o má»™t enum `CommandType` vá»›i cÃ¡c háº±ng sá»‘ cho má»—i command: `CREATE_USER`, `GET_USER`.
    *   Enum nÃ y sáº½ hoáº¡t Ä‘á»™ng nhÆ° khÃ³a trong registry cá»§a chÃºng ta.

5.  **Lá»›p `CommandRegistry` (Cá»‘t lÃµi cá»§a dá»± Ã¡n):**
    *   Lá»›p nÃ y sáº½ giá»¯ Ã¡nh xáº¡ tá»« má»™t `CommandType` Ä‘áº¿n `CommandHandler` tÆ°Æ¡ng á»©ng cá»§a nÃ³.
    *   Bá»™ nhá»› trong nÃªn lÃ  má»™t `Map`. VÃ¬ khÃ³a lÃ  má»™t enum, triá»ƒn khai `Map` tá»‘i Æ°u nháº¥t lÃ  gÃ¬? **`EnumMap`**.
    *   Registry sáº½ cáº§n hai method:
        *   `register(CommandType type, CommandHandler<?, ?> handler)`: Method nÃ y sáº½ Ä‘Äƒng kÃ½ má»™t trÃ¬nh xá»­ lÃ½ cho má»™t loáº¡i command Ä‘Ã£ cho.
        *   `<R, C extends Command<R>> R execute(C command)`: ÄÃ¢y lÃ  pháº§n phá»©c táº¡p nháº¥t. Method generic nÃ y sáº½:
            *   Äáº§u tiÃªn, xÃ¡c Ä‘á»‹nh `CommandType` dá»±a trÃªn lá»›p cá»§a object `command` Ä‘Æ°á»£c truyá»n vÃ o.
            *   Sau Ä‘Ã³, tra cá»©u trÃ¬nh xá»­ lÃ½ chÃ­nh xÃ¡c trong `EnumMap`.
            *   Cuá»‘i cÃ¹ng, thá»±c thi trÃ¬nh xá»­ lÃ½ vá»›i command vÃ  tráº£ vá» káº¿t quáº£. Äiá»u nÃ y sáº½ yÃªu cáº§u má»™t sá»‘ Ã©p kiá»ƒu, cáº§n Ä‘Æ°á»£c xá»­ lÃ½ cáº©n tháº­n (Ä‘Ã¢y lÃ  má»™t máº«u phá»• biáº¿n trong loáº¡i há»‡ thá»‘ng Ä‘iá»u phá»‘i nÃ y).

**VÃ­ dá»¥ sá»­ dá»¥ng:**

```java
public static void main(String[] args) {
    CommandRegistry registry = new CommandRegistry();

    // ÄÄƒng kÃ½ cÃ¡c trÃ¬nh xá»­ lÃ½ (sá»­ dá»¥ng lambda cho Ä‘Æ¡n giáº£n)
    registry.register(CommandType.CREATE_USER, (CreateUserCommand cmd) -> {
        System.out.println("Creating user: " + cmd.getUsername());
        return UUID.randomUUID();
    });

    registry.register(CommandType.GET_USER, (GetUserCommand cmd) -> {
        System.out.println("Getting user: " + cmd.getUserId());
        return new User(cmd.getUserId(), "Mock User");
    });

    // Thá»±c thi cÃ¡c command má»™t cÃ¡ch an toÃ n vá» kiá»ƒu
    CreateUserCommand createUser = new CreateUserCommand("alice", "password123");
    UUID newUserId = registry.execute(createUser);
    System.out.println("New user ID: " + newUserId);

    GetUserCommand getUser = new GetUserCommand(newUserId);
    User user = registry.execute(getUser);
    System.out.println("Fetched user: " + user.getName());
}
```

Dá»± Ã¡n nÃ y sáº½ buá»™c báº¡n pháº£i váº­t lá»™n vá»›i cÃ¡c method generic, cÃ¡c kÃ½ tá»± Ä‘áº¡i diá»‡n (trong map cá»§a method `register`), cÃ¡c enum lÃ m khÃ³a, vÃ  cÃ¡ch káº¿t há»£p táº¥t cáº£ chÃºng láº¡i vá»›i nhau thÃ nh má»™t thiáº¿t káº¿ thá»±c táº¿, an toÃ n vá» kiá»ƒu.